# Release v0.1.6

## ğŸ”„ LLM API è‡ªåŠ¨é‡è¯•ä¸ç½‘ç»œå¢å¼º

è¿™ä¸ªç‰ˆæœ¬ä¸“æ³¨äºæå‡ç½‘ç»œè¯·æ±‚çš„ç¨³å®šæ€§å’Œå®¹é”™èƒ½åŠ›ï¼Œæ·»åŠ äº†è‡ªåŠ¨é‡è¯•æœºåˆ¶å’Œå®Œæ•´çš„ä»£ç†æ”¯æŒã€‚

## æ–°åŠŸèƒ½

### 1. è‡ªåŠ¨é‡è¯•æœºåˆ¶

LLM API è¯·æ±‚ç°åœ¨ä¼šè‡ªåŠ¨é‡è¯•ï¼Œåº”å¯¹ä¸´æ—¶æ€§ç½‘ç»œæ•…éšœå’Œ API é™æµã€‚

**é‡è¯•ç­–ç•¥**ï¼š
- **æŒ‡æ•°é€€é¿**: 1ç§’ â†’ 2ç§’ â†’ 4ç§’
- **æœ€å¤šé‡è¯•**: 3 æ¬¡ï¼ˆæ€»å…±å°è¯• 4 æ¬¡ï¼‰
- **æ™ºèƒ½é‡è¯•**: ä»…å¯¹å¯æ¢å¤é”™è¯¯é‡è¯•
  - âœ… è¿æ¥å¤±è´¥ (connection failed)
  - âœ… 429 é™æµ (rate limit)
  - âŒ 401/403 è®¤è¯é”™è¯¯ï¼ˆä¸é‡è¯•ï¼‰
  - âŒ 400 è¯·æ±‚æ ¼å¼é”™è¯¯ï¼ˆä¸é‡è¯•ï¼‰

**é‡è¯•æ—¥å¿—ç¤ºä¾‹**ï¼ˆä½¿ç”¨ `-v` æŸ¥çœ‹ï¼‰ï¼š
```
WARN  OpenAI API request failed (attempt 1/4): connection failed. Retrying in 1.0s...
WARN  OpenAI API request failed (attempt 2/4): connection failed. Retrying in 2.0s...
INFO  OpenAI API request succeeded after 3 attempts
```

### 2. HTTP è¶…æ—¶é…ç½®

é˜²æ­¢è¯·æ±‚æ— é™æŒ‚èµ·ï¼š

- **è¯·æ±‚è¶…æ—¶**: 120 ç§’ï¼ˆæ•´ä¸ª API è°ƒç”¨ï¼‰
- **è¿æ¥è¶…æ—¶**: 10 ç§’ï¼ˆå»ºç«‹è¿æ¥ï¼‰

è¿™ç¡®ä¿å³ä½¿ API å“åº”ç¼“æ…¢æˆ–ç½‘ç»œä¸ç¨³å®šï¼Œç¨‹åºä¹Ÿä¸ä¼šå¡æ­»ã€‚

### 3. å¢å¼ºçš„é”™è¯¯ä¿¡æ¯

ç½‘ç»œé”™è¯¯ç°åœ¨æä¾›è¯¦ç»†çš„è¯Šæ–­ä¿¡æ¯å’Œè§£å†³å»ºè®®ï¼š

```
âœ— Error: OpenAI API connection failed: error sending request. Check network connectivity or API endpoint.
ğŸ’¡ Suggestion: Cannot connect to API server. Check endpoint URL, network, or DNS settings
```

é”™è¯¯ç±»å‹è¯†åˆ«ï¼š
- `timeout` - è¯·æ±‚è¶…æ—¶
- `connection failed` - æ— æ³•å»ºç«‹è¿æ¥
- `request error` - è¯·æ±‚æ„é€ é”™è¯¯
- `body error` - è¯·æ±‚ä½“é”™è¯¯
- `decode error` - å“åº”è§£ç é”™è¯¯

### 4. ä»£ç†æ”¯æŒ

æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ä»£ç†ï¼ˆreqwest å†…ç½®åŠŸèƒ½ï¼‰ï¼š

**HTTP/HTTPS ä»£ç†**ï¼š
```bash
export HTTP_PROXY=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890
gcop-rs commit
```

**SOCKS5 ä»£ç†**ï¼ˆæ–°å¢ `socks` featureï¼‰ï¼š
```bash
export HTTP_PROXY=socks5://127.0.0.1:1080
export HTTPS_PROXY=socks5://127.0.0.1:1080
gcop-rs commit
```

**ä»£ç†è®¤è¯**ï¼š
```bash
export HTTP_PROXY=http://username:password@proxy.example.com:8080
```

**æ’é™¤ä»£ç†**ï¼š
```bash
export NO_PROXY=localhost,127.0.0.1,.local
```

## å…¶ä»–æ”¹è¿›

### å¸¸é‡é‡æ„

æå–æ‰€æœ‰é­”æ³•æ•°å­—åˆ° `src/constants.rs`ï¼š

```rust
// æ–°å¢å¸¸é‡æ¨¡å—
pub mod http {
    pub const REQUEST_TIMEOUT_SECS: u64 = 120;
    pub const CONNECT_TIMEOUT_SECS: u64 = 10;
}

pub mod retry {
    pub const MAX_RETRY_ATTEMPTS: usize = 3;
    pub const INITIAL_RETRY_DELAY_MS: u64 = 1000;
}
```

### æ–‡ä»¶å¤§å°æ ¡éªŒä¼˜åŒ–

ä¼˜åŒ–äº†å¤§æ–‡ä»¶è·³è¿‡é€»è¾‘ï¼Œé¿å…å‘é€è¶…å¤§ diff åˆ° LLM APIã€‚

## ä½¿ç”¨ç¤ºä¾‹

### åœ¨ç½‘ç»œä¸ç¨³å®šç¯å¢ƒä¸‹ä½¿ç”¨

```bash
# å¯ç”¨ verbose æ¨¡å¼æŸ¥çœ‹é‡è¯•è¿‡ç¨‹
gcop-rs -v commit

# è¾“å‡ºç¤ºä¾‹ï¼š
# DEBUG Sending request to: https://api.openai.com/v1/chat/completions
# ERROR OpenAI API request failed [connection failed]: ...
# WARN  OpenAI API request failed (attempt 1/4): connection failed. Retrying in 1.0s...
# WARN  OpenAI API request failed (attempt 2/4): connection failed. Retrying in 2.0s...
# INFO  OpenAI API request succeeded after 3 attempts
```

### é…ç½®ä»£ç†

```bash
# ä¸´æ—¶ä½¿ç”¨ä»£ç†
HTTP_PROXY=http://127.0.0.1:7890 HTTPS_PROXY=http://127.0.0.1:7890 gcop-rs commit

# æˆ–æ°¸ä¹…é…ç½®ï¼ˆæ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrcï¼‰
export HTTP_PROXY=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890
```

### éªŒè¯ä»£ç†æ˜¯å¦ç”Ÿæ•ˆ

```bash
gcop-rs -v commit

# å¦‚æœçœ‹åˆ°ç±»ä¼¼æ—¥å¿—ï¼Œè¯´æ˜ä»£ç†å·²å¯ç”¨ï¼š
# DEBUG reqwest::connect: proxy(http://127.0.0.1:7890/) intercepts 'https://api.openai.com/'
```

## å‡çº§è¯´æ˜

ä» v0.1.5 å‡çº§æ— éœ€ä»»ä½•é…ç½®æ›´æ”¹ã€‚

æ‰€æœ‰æ–°åŠŸèƒ½éƒ½æ˜¯è‡ªåŠ¨å¯ç”¨çš„ï¼š
- âœ… è‡ªåŠ¨é‡è¯• - å¼€ç®±å³ç”¨
- âœ… è¶…æ—¶ä¿æŠ¤ - å¼€ç®±å³ç”¨
- âœ… HTTP/HTTPS ä»£ç† - é€šè¿‡ç¯å¢ƒå˜é‡
- âœ… SOCKS ä»£ç† - é€šè¿‡ç¯å¢ƒå˜é‡

## ğŸ“¦ å®‰è£…

```bash
cargo install gcop-rs
```

æˆ–ä»æºç æ„å»ºï¼š

```bash
git clone https://github.com/AptS-1547/gcop-rs.git
cd gcop-rs
cargo build --release
```

## ğŸ“š æ–‡æ¡£

- [README](https://github.com/AptS-1547/gcop-rs#readme)
- [ä¸­æ–‡æ–‡æ¡£](https://github.com/AptS-1547/gcop-rs/blob/master/README_ZH.md)
- [Full Changelog](https://github.com/AptS-1547/gcop-rs/blob/master/CHANGELOG.md)
- [Troubleshooting Guide](https://github.com/AptS-1547/gcop-rs/blob/master/docs/troubleshooting.md)

## åé¦ˆä¸è´¡çŒ®

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ [Issue](https://github.com/AptS-1547/gcop-rs/issues)ã€‚
