# Release v0.2.1

## 🐛 Bug 修复

### Windows 别名安装问题修复 (Issue #7)

**问题**：Windows 平台上 `gcop-rs alias` 命令失败，因为使用了 Unix 特有的 `which` 命令。

**解决**：使用跨平台的 `which` crate 替代，自动处理 Windows `.exe` 扩展名和不同平台的 PATH 分隔符。

Windows 用户现在可以正常使用 `gcop-rs alias` 和 `gcop-rs init` 安装别名了。

## ♻️ 代码重构

### Commit 命令状态机改造

重构 commit 命令为状态机模式（新增 `commit_state_machine.rs` 模块），提升可测试性和可维护性。

- ✅ 更清晰的状态转换逻辑
- ✅ 更好的测试覆盖
- ✅ 用户体验完全不变

## ✅ 测试增强

新增 **500+ 行**测试代码：

- Config 加载和验证测试
- Commit 状态机测试
- Error 建议测试
- Git diff 统计测试
- LLM prompt 和 provider 测试

测试工具：新增 `mockall = "0.13"` (optional) 用于 mock 测试。

## 📚 文档跨平台化

所有文档更新为支持 **Linux/macOS/Windows** 三平台：

**配置路径**：
- Linux: `~/.config/gcop/config.toml`
- macOS: `~/Library/Application Support/gcop/config.toml`
- Windows: `%APPDATA%\gcop\config.toml`

**安装指南**：
- 简化 README 为推荐 `cargo install gcop-rs`
- 添加 Windows PowerShell 安装/更新/卸载命令
- 所有配置说明区分平台

**更新文档**：
- `README.md` / `README_ZH.md`
- `docs/installation.md` / `docs/zh/installation.md`
- `docs/configuration.md` / `docs/zh/configuration.md`
- `docs/commands.md` / `docs/zh/commands.md`

## 📦 依赖变更

- 新增 `which = "8.0.0"` - 跨平台可执行文件查找
- 新增 `mockall = "0.13"` (optional) - 测试 mock 工具

## 升级说明

从 v0.2.0 升级**无需任何操作**，完全向后兼容。

## 📦 安装

```bash
cargo install gcop-rs
```

## 统计

```
25 个文件变更
+2267 行新增
-157 行删除
```

## 📚 文档

- [安装指南](../installation.md)
- [配置指南](../configuration.md)
- [Full Changelog](../../CHANGELOG.md)

## 反馈

如有问题或建议，欢迎提交 [Issue](https://github.com/AptS-1547/gcop-rs/issues)。
